{"version":3,"file":"theme.js","sourceRoot":"../src/","sources":["styles/theme.ts"],"names":[],"mappings":"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","sourcesContent":["import { Customizations } from '@uifabric/utilities/lib/Customizations';\r\nimport {\r\n  IPalette,\r\n  ISemanticColors,\r\n  ITheme,\r\n  IPartialTheme\r\n} from '../interfaces/index';\r\nimport { DefaultFontStyles } from './DefaultFontStyles';\r\nimport { DefaultPalette } from './DefaultPalette';\r\nimport { loadTheme as legacyLoadTheme } from '@microsoft/load-themed-styles';\r\n\r\nlet _theme: ITheme = {\r\n  palette: DefaultPalette,\r\n  semanticColors: _makeSemanticColorsFromPalette(DefaultPalette, false, false),\r\n  fonts: DefaultFontStyles,\r\n  isInverted: false,\r\n  disableGlobalClassNames: false\r\n};\r\nlet _onThemeChangeCallbacks: Array<(theme: ITheme) => void> = [];\r\n\r\nexport const ThemeSettingName = 'theme';\r\n\r\nif (!Customizations.getSettings([ThemeSettingName]).theme) {\r\n  let win = typeof window !== 'undefined' ? window : undefined;\r\n\r\n  // tslint:disable:no-string-literal no-any\r\n  if (\r\n    win &&\r\n    (win as any)['FabricConfig'] &&\r\n    (win as any)['FabricConfig'].theme\r\n  ) {\r\n    _theme = createTheme((win as any)['FabricConfig'].theme);\r\n  }\r\n  // tslint:enable:no-string-literal no-any\r\n\r\n  // Set the default theme.\r\n  Customizations.applySettings({ [ThemeSettingName]: _theme });\r\n}\r\n\r\n/**\r\n * Gets the theme object\r\n * @param {boolean} depComments - Whether to include deprecated tags as comments for deprecated slots.\r\n */\r\nexport function getTheme(depComments: boolean = false): ITheme {\r\n  if (depComments === true) {\r\n    _theme = createTheme({}, depComments);\r\n  }\r\n  return _theme;\r\n}\r\n\r\n/**\r\n * Registers a callback that gets called whenever the theme changes.\r\n * This should only be used when the component cannot automatically get theme changes through its state.\r\n * This will not register duplicate callbacks.\r\n */\r\nexport function registerOnThemeChangeCallback(\r\n  callback: (theme: ITheme) => void\r\n): void {\r\n  if (_onThemeChangeCallbacks.indexOf(callback) === -1) {\r\n    _onThemeChangeCallbacks.push(callback);\r\n  }\r\n}\r\n\r\n/**\r\n * See registerOnThemeChangeCallback().\r\n * Removes previously registered callbacks.\r\n */\r\nexport function removeOnThemeChangeCallback(\r\n  callback: (theme: ITheme) => void\r\n): void {\r\n  const i = _onThemeChangeCallbacks.indexOf(callback);\r\n  if (i === -1) {\r\n    return;\r\n  }\r\n\r\n  _onThemeChangeCallbacks.splice(i, 1);\r\n}\r\n\r\n/**\r\n * Applies the theme, while filling in missing slots.\r\n * @param {object} theme - Partial theme object.\r\n * @param {boolean} depComments - Whether to include deprecated tags as comments for deprecated slots.\r\n */\r\nexport function loadTheme(\r\n  theme: IPartialTheme,\r\n  depComments: boolean = false\r\n): ITheme {\r\n  _theme = createTheme(theme, depComments);\r\n\r\n  // Invoke the legacy method of theming the page as well.\r\n  legacyLoadTheme({ ..._theme.palette, ..._theme.semanticColors });\r\n\r\n  Customizations.applySettings({ [ThemeSettingName]: _theme });\r\n\r\n  _onThemeChangeCallbacks.forEach((callback: (theme: ITheme) => void) => {\r\n    try {\r\n      callback(_theme);\r\n    } catch (e) {\r\n      // don't let a bad callback break everything else\r\n    }\r\n  });\r\n\r\n  return _theme;\r\n}\r\n\r\n/**\r\n * Creates a custom theme definition which can be used with the Customizer.\r\n * @param {object} theme - Partial theme object.\r\n * @param {boolean} depComments - Whether to include deprecated tags as comments for deprecated slots.\r\n */\r\nexport function createTheme(\r\n  theme: IPartialTheme,\r\n  depComments: boolean = false\r\n): ITheme {\r\n  let newPalette = { ...DefaultPalette, ...theme.palette };\r\n\r\n  if (!theme.palette || !theme.palette.accent) {\r\n    newPalette.accent = newPalette.themePrimary;\r\n  }\r\n\r\n  // mix in custom overrides with good slots first, since custom overrides might be used in fixing deprecated slots\r\n  let newSemanticColors = {\r\n    ..._makeSemanticColorsFromPalette(\r\n      newPalette,\r\n      !!theme.isInverted,\r\n      depComments\r\n    ),\r\n    ...theme.semanticColors\r\n  };\r\n\r\n  return {\r\n    palette: newPalette,\r\n    fonts: {\r\n      ...DefaultFontStyles,\r\n      ...theme.fonts\r\n    },\r\n    semanticColors: newSemanticColors,\r\n    isInverted: !!theme.isInverted,\r\n    disableGlobalClassNames: !!theme.disableGlobalClassNames\r\n  };\r\n}\r\n\r\n// Generates all the semantic slot colors based on the Fabric palette.\r\n// We'll use these as fallbacks for semantic slots that the passed in theme did not define.\r\nfunction _makeSemanticColorsFromPalette(\r\n  p: IPalette,\r\n  isInverted: boolean,\r\n  depComments: boolean\r\n): ISemanticColors {\r\n  let toReturn: ISemanticColors = {\r\n    bodyBackground: p.white,\r\n    bodyStandoutBackground: p.neutralLighterAlt,\r\n    bodyFrameBackground: p.white,\r\n    bodyFrameDivider: p.neutralLight,\r\n    bodyText: p.neutralPrimary,\r\n    bodyTextChecked: p.black,\r\n    bodySubtext: p.neutralSecondary,\r\n    bodyDivider: p.neutralLight,\r\n\r\n    disabledBackground: p.neutralLighter,\r\n    disabledText: p.neutralTertiary,\r\n    disabledBodyText: p.neutralTertiaryAlt,\r\n    disabledSubtext: p.neutralQuaternary,\r\n\r\n    focusBorder: p.black,\r\n    variantBorder: p.neutralLight,\r\n    variantBorderHovered: p.neutralTertiary,\r\n    defaultStateBackground: p.neutralLight,\r\n\r\n    errorText: !isInverted ? p.redDark : '#ff5f5f',\r\n    warningText: !isInverted ? '#333333' : '#ffffff',\r\n    errorBackground: !isInverted\r\n      ? 'rgba(232, 17, 35, .2)'\r\n      : 'rgba(232, 17, 35, .5)',\r\n    blockingBackground: !isInverted\r\n      ? 'rgba(234, 67, 0, .2)'\r\n      : 'rgba(234, 67, 0, .5)',\r\n    warningBackground: !isInverted\r\n      ? 'rgba(255, 185, 0, .2)'\r\n      : 'rgba(255, 251, 0, .6)',\r\n    warningHighlight: !isInverted ? '#ffb900' : '#fff100',\r\n    successBackground: !isInverted\r\n      ? 'rgba(186, 216, 10, .2)'\r\n      : 'rgba(186, 216, 10, .4)',\r\n\r\n    inputBorder: p.neutralTertiary,\r\n    inputBorderHovered: p.neutralDark,\r\n    inputBackground: p.white,\r\n    inputBackgroundChecked: p.themePrimary,\r\n    inputBackgroundCheckedHovered: p.themeDarkAlt,\r\n    inputForegroundChecked: p.white,\r\n    inputFocusBorderAlt: p.themePrimary,\r\n    smallInputBorder: p.neutralSecondary,\r\n    inputPlaceholderText: p.neutralSecondary,\r\n\r\n    buttonBackground: p.neutralLighter,\r\n    buttonBackgroundChecked: p.neutralTertiaryAlt,\r\n    buttonBackgroundHovered: p.neutralLight,\r\n    buttonBackgroundCheckedHovered: p.neutralLight,\r\n    buttonBackgroundPressed: p.neutralTertiaryAlt,\r\n    buttonBackgroundDisabled: p.neutralLighter,\r\n    buttonBorder: 'transparent',\r\n    buttonText: p.neutralPrimary,\r\n    buttonTextHovered: p.neutralDark,\r\n    buttonTextChecked: p.neutralDark,\r\n    buttonTextCheckedHovered: p.black,\r\n    buttonTextPressed: p.neutralDark,\r\n    buttonTextDisabled: p.neutralTertiary,\r\n    buttonBorderDisabled: 'transparent',\r\n    primaryButtonBackground: p.themePrimary,\r\n    primaryButtonBackgroundHovered: p.themeDarkAlt,\r\n    primaryButtonBackgroundPressed: p.themeDark,\r\n    primaryButtonBorder: 'transparent',\r\n    primaryButtonText: p.white,\r\n    primaryButtonTextHovered: p.white,\r\n    primaryButtonTextPressed: p.white,\r\n\r\n    menuBackground: p.white,\r\n    menuDivider: p.neutralTertiaryAlt,\r\n    menuIcon: p.themePrimary,\r\n    menuHeader: p.themePrimary,\r\n    menuItemBackgroundHovered: p.neutralLighter,\r\n    menuItemBackgroundPressed: p.neutralLight,\r\n    menuItemText: p.neutralPrimary,\r\n    menuItemTextHovered: p.neutralDark,\r\n\r\n    listBackground: p.white,\r\n    listText: p.neutralPrimary,\r\n    listItemBackgroundHovered: p.neutralLighter,\r\n    listItemBackgroundChecked: p.neutralLight,\r\n    listItemBackgroundCheckedHovered: p.neutralQuaternaryAlt,\r\n\r\n    listHeaderBackgroundHovered: p.neutralLighter,\r\n    listHeaderBackgroundPressed: p.neutralLight,\r\n\r\n    actionLink: p.neutralPrimary,\r\n    actionLinkHovered: p.neutralDark,\r\n    link: p.themePrimary,\r\n    linkHovered: p.themeDarker,\r\n\r\n    // Deprecated slots, second pass by _fixDeprecatedSlots() later for self-referential slots\r\n    listTextColor: '',\r\n    menuItemBackgroundChecked: p.neutralLight\r\n  };\r\n\r\n  return _fixDeprecatedSlots(toReturn, depComments!);\r\n}\r\n\r\nfunction _fixDeprecatedSlots(\r\n  s: ISemanticColors,\r\n  depComments: boolean\r\n): ISemanticColors {\r\n  // Add @deprecated tag as comment if enabled\r\n  let dep = '';\r\n  if (depComments === true) {\r\n    dep = ' /* @deprecated */';\r\n  }\r\n\r\n  s.listTextColor = s.listText + dep;\r\n  s.menuItemBackgroundChecked += dep;\r\n  return s;\r\n}\r\n"]}