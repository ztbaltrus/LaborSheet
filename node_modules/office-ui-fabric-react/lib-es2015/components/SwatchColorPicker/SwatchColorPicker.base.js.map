{"version":3,"file":"SwatchColorPicker.base.js","sourceRoot":"../src/","sources":["components/SwatchColorPicker/SwatchColorPicker.base.tsx"],"names":[],"mappings":"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","sourcesContent":["import * as React from 'react';\r\nimport {\r\n  Async,\r\n  BaseComponent,\r\n  classNamesFunction,\r\n  customizable,\r\n  findIndex,\r\n  KeyCodes,\r\n  getId\r\n} from '../../Utilities';\r\nimport {\r\n  ISwatchColorPicker,\r\n  ISwatchColorPickerProps,\r\n  ISwatchColorPickerStyleProps,\r\n  ISwatchColorPickerStyles\r\n} from './SwatchColorPicker.types';\r\nimport { Grid } from '../../utilities/grid/Grid';\r\nimport { IColorCellProps } from './ColorPickerGridCell.types';\r\nimport { ColorPickerGridCell } from './ColorPickerGridCell';\r\n\r\nexport interface ISwatchColorPickerState {\r\n  selectedIndex?: number;\r\n}\r\n\r\nconst getClassNames = classNamesFunction<ISwatchColorPickerStyleProps, ISwatchColorPickerStyles>();\r\n\r\n@customizable('SwatchColorPicker', ['theme'])\r\nexport class SwatchColorPickerBase extends BaseComponent<ISwatchColorPickerProps, ISwatchColorPickerState> implements ISwatchColorPicker {\r\n\r\n  public static defaultProps = {\r\n    cellShape: 'circle',\r\n    disabled: false,\r\n    shouldFocusCircularNavigate: true\r\n  } as ISwatchColorPickerProps;\r\n\r\n  private _id: string;\r\n  private _cellFocused: boolean;\r\n\r\n  private navigationIdleTimeoutId: number | undefined;\r\n  private isNavigationIdle: boolean;\r\n  private readonly navigationIdleDelay: number = 250 /* ms */;\r\n  private async: Async;\r\n\r\n  constructor(props: ISwatchColorPickerProps) {\r\n    super(props);\r\n\r\n    this._id = props.id || getId('swatchColorPicker');\r\n\r\n    this._warnMutuallyExclusive({\r\n      'focusOnHover': 'onHover'\r\n    });\r\n\r\n    this._warnConditionallyRequiredProps(\r\n      ['focusOnHover'],\r\n      'mouseLeaveParentSelector',\r\n      !!this.props.mouseLeaveParentSelector\r\n    );\r\n\r\n    this.isNavigationIdle = true;\r\n    this.async = new Async(this);\r\n\r\n    let selectedIndex: number | undefined;\r\n    if (props.selectedId) {\r\n      selectedIndex = this._getSelectedIndex(props.colorCells, props.selectedId);\r\n    }\r\n\r\n    this.state = {\r\n      selectedIndex\r\n    };\r\n  }\r\n\r\n  public componentWillReceiveProps(newProps: ISwatchColorPickerProps): void {\r\n    let newSelectedIndex;\r\n\r\n    if (newProps.selectedId) {\r\n      newSelectedIndex = this._getSelectedIndex(newProps.colorCells, newProps.selectedId);\r\n    }\r\n\r\n    if (newSelectedIndex !== this.state.selectedIndex) {\r\n      this.setState({\r\n        selectedIndex: newSelectedIndex\r\n      });\r\n    }\r\n  }\r\n\r\n  public componentWillUnmount() {\r\n    if (this.props.onCellFocused && this._cellFocused) {\r\n      this._cellFocused = false;\r\n      this.props.onCellFocused();\r\n    }\r\n  }\r\n\r\n  public render(): JSX.Element | null {\r\n    const {\r\n      colorCells,\r\n      columnCount,\r\n      positionInSet,\r\n      setSize,\r\n      shouldFocusCircularNavigate,\r\n      className,\r\n      doNotContainWithinFocusZone,\r\n      getStyles,\r\n    } = this.props;\r\n\r\n    const classNames = getClassNames(\r\n      getStyles!,\r\n      {\r\n        theme: this.props.theme!,\r\n        className,\r\n      }\r\n    );\r\n\r\n    if (colorCells.length < 1 || columnCount < 1) {\r\n      return null;\r\n    }\r\n    return (\r\n      <Grid\r\n        { ...this.props }\r\n        items={ colorCells.map((item, index) => { return { ...item, index: index }; }) }\r\n        columnCount={ columnCount }\r\n        onRenderItem={ this._renderOption }\r\n        positionInSet={ positionInSet && positionInSet }\r\n        setSize={ setSize && setSize }\r\n        shouldFocusCircularNavigate={ shouldFocusCircularNavigate }\r\n        doNotContainWithinFocusZone={ doNotContainWithinFocusZone }\r\n        onBlur={ this._onSwatchColorPickerBlur }\r\n        theme={ this.props.theme! }\r\n        // tslint:disable-next-line:jsx-no-lambda\r\n        getStyles={ (props) => ({\r\n          root: classNames.root,\r\n          tableCell: classNames.tableCell,\r\n          focusedContainer: classNames.focusedContainer\r\n        }) }\r\n      />);\r\n  }\r\n\r\n  /**\r\n   * When the whole swatchColorPicker is blurred,\r\n   * make sure to clear the pending focused stated\r\n   */\r\n  private _onSwatchColorPickerBlur = (): void => {\r\n    if (this.props.onCellFocused) {\r\n      this._cellFocused = false;\r\n      this.props.onCellFocused();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get the selected item's index\r\n   * @param items - The items to search\r\n   * @param selectedId - The selected item's id to find\r\n   * @returns {number} - The index of the selected item's id, -1 if there was no match\r\n   */\r\n  private _getSelectedIndex(items: IColorCellProps[], selectedId: string): number | undefined {\r\n    const selectedIndex = findIndex(items, (item => (item.id === selectedId)));\r\n    return selectedIndex >= 0 ? selectedIndex : undefined;\r\n  }\r\n\r\n  /**\r\n   * Render a color cell\r\n   * @param item - The item to render\r\n   * @returns {JSX.Element} - Element representing the item\r\n   */\r\n  private _renderOption = (item: IColorCellProps): JSX.Element => {\r\n    const id = this._id;\r\n\r\n    return (\r\n      <ColorPickerGridCell\r\n        item={ item }\r\n        id={ id }\r\n        color={ item.color }\r\n        getStyles={ this.props.getColorGridCellStyles }\r\n        disabled={ this.props.disabled }\r\n        onClick={ this._onCellClick }\r\n        onHover={ this._onGridCellHovered }\r\n        onFocus={ this._onGridCellFocused }\r\n        selected={ this.state.selectedIndex !== undefined && (this.state.selectedIndex === item.index) }\r\n        circle={ this.props.cellShape === 'circle' }\r\n        label={ item.label }\r\n        onMouseEnter={ this._onMouseEnter }\r\n        onMouseMove={ this._onMouseMove }\r\n        onMouseLeave={ this._onMouseLeave }\r\n        onWheel={ this._onWheel }\r\n        onKeyDown={ this._onKeyDown }\r\n      />\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Callback passed to the GridCell that will manage triggering the onCellHovered callback for mouseEnter\r\n   */\r\n  private _onMouseEnter = (ev: React.MouseEvent<HTMLButtonElement>): boolean => {\r\n\r\n    if (!this.props.focusOnHover) {\r\n      if (!this.isNavigationIdle || this.props.disabled) {\r\n        return true;\r\n      }\r\n\r\n      return false;\r\n    }\r\n\r\n    if (this.isNavigationIdle && !this.props.disabled) {\r\n      ev.currentTarget.focus();\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * Callback passed to the GridCell that will manage Hover/Focus updates\r\n   */\r\n  private _onMouseMove = (ev: React.MouseEvent<HTMLButtonElement>): boolean => {\r\n\r\n    if (!this.props.focusOnHover) {\r\n      if (!this.isNavigationIdle || this.props.disabled) {\r\n        return true;\r\n      }\r\n\r\n      return false;\r\n    }\r\n\r\n    const targetElement = ev.currentTarget as HTMLElement;\r\n\r\n    // If navigation is idle and the targetElement is the focused element bail out\r\n    // if (!this.isNavigationIdle || (document && targetElement === (document.activeElement as HTMLElement))) {\r\n    if (this.isNavigationIdle && !(document && targetElement === (document.activeElement as HTMLElement))) {\r\n      targetElement.focus();\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * Callback passed to the GridCell that will manage Hover/Focus updates\r\n   */\r\n  private _onMouseLeave = (ev: React.MouseEvent<HTMLButtonElement>): void => {\r\n    const parentSelector = this.props.mouseLeaveParentSelector;\r\n\r\n    if (!this.props.focusOnHover ||\r\n      !parentSelector ||\r\n      !this.isNavigationIdle ||\r\n      this.props.disabled) {\r\n      return;\r\n    }\r\n\r\n    // Get the the elements that math the given selector\r\n    const elements = document.querySelectorAll(parentSelector);\r\n\r\n    // iterate over the elements return to make sure it is a parent of the target and focus it\r\n    for (let index = 0; index < elements.length; index += 1) {\r\n      if (elements[index].contains(ev.currentTarget)) {\r\n        /**\r\n         * IE11 focus() method forces parents to scroll to top of element.\r\n         * Edge and IE expose a setActive() function for focusable divs that\r\n         * sets the page focus but does not scroll the parent element.\r\n         */\r\n        if ((elements[index] as any).setActive) {\r\n          (elements[index] as any).setActive();\r\n        } else {\r\n          (elements[index] as HTMLElement).focus();\r\n        }\r\n\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Callback to make sure we don't update the hovered element during mouse wheel\r\n   */\r\n  private _onWheel = (): void => {\r\n    this.setNavigationTimeout();\r\n  }\r\n\r\n  /**\r\n   * Callback that\r\n   */\r\n  private _onKeyDown = (ev: React.KeyboardEvent<HTMLButtonElement>): void => {\r\n    if (\r\n      ev.which === KeyCodes.up ||\r\n      ev.which === KeyCodes.down ||\r\n      ev.which === KeyCodes.left ||\r\n      ev.which === KeyCodes.right\r\n    ) {\r\n      this.setNavigationTimeout();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Sets a timeout so we won't process any mouse \"hover\" events\r\n   * while navigating (via mouseWheel or arrowKeys)\r\n   */\r\n  private setNavigationTimeout = () => {\r\n    if (!this.isNavigationIdle && this.navigationIdleTimeoutId !== undefined) {\r\n      this.async.clearTimeout(this.navigationIdleTimeoutId);\r\n      this.navigationIdleTimeoutId = undefined;\r\n    } else {\r\n      this.isNavigationIdle = false;\r\n    }\r\n\r\n    this.navigationIdleTimeoutId = this.async.setTimeout(() => {\r\n      this.isNavigationIdle = true;\r\n    }, this.navigationIdleDelay);\r\n  }\r\n\r\n  /**\r\n   * Callback passed to the GridCell class that will trigger the onCellHovered callback of the SwatchColorPicker\r\n   * NOTE: This will not be triggered if shouldFocusOnHover === true\r\n   */\r\n  private _onGridCellHovered = (item?: IColorCellProps): void => {\r\n    const { onCellHovered } = this.props;\r\n\r\n    if (onCellHovered) {\r\n      return item ? onCellHovered(item.id, item.color) : onCellHovered();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Callback passed to the GridCell class that will trigger the onCellFocus callback of the SwatchColorPicker\r\n   */\r\n  private _onGridCellFocused = (item?: IColorCellProps): void => {\r\n    const { onCellFocused } = this.props;\r\n    if (onCellFocused) {\r\n      if (item) {\r\n        this._cellFocused = true;\r\n        return onCellFocused(item.id, item.color);\r\n      } else {\r\n        this._cellFocused = false;\r\n        return onCellFocused();\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Handle the click on a cell\r\n   * @param item - The cell that the click was fired against\r\n   */\r\n  private _onCellClick = (item: IColorCellProps): void => {\r\n    if (this.props.disabled) {\r\n      return;\r\n    }\r\n\r\n    const index = item.index as number;\r\n\r\n    // If we have a valid index and it is not already\r\n    // selected, select it\r\n    if (index >= 0 && index !== this.state.selectedIndex) {\r\n\r\n      if (this.props.onCellFocused && this._cellFocused) {\r\n        this._cellFocused = false;\r\n        this.props.onCellFocused();\r\n      }\r\n\r\n      if (this.props.onColorChanged) {\r\n        this.props.onColorChanged(item.id, item.color);\r\n      }\r\n\r\n      this.setState({\r\n        selectedIndex: index\r\n      });\r\n    }\r\n  }\r\n}"]}