{"version":3,"file":"Dropdown.js","sourceRoot":"../src/","sources":["components/Dropdown/Dropdown.tsx"],"names":[],"mappings":"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","sourcesContent":["import * as React from 'react';\r\nimport { IDropdownProps, IDropdownOption, DropdownMenuItemType } from './Dropdown.types';\r\nimport { Checkbox } from '../../Checkbox';\r\nimport { DirectionalHint } from '../../common/DirectionalHint';\r\nimport { Callout } from '../../Callout';\r\nimport { Label } from '../../Label';\r\nimport { CommandButton } from '../../Button';\r\nimport { Panel } from '../../Panel';\r\nimport { Icon } from '../../Icon';\r\nimport { IFocusZone, FocusZone, FocusZoneDirection } from '../../FocusZone';\r\nimport { withResponsiveMode, ResponsiveMode } from '../../utilities/decorators/withResponsiveMode';\r\nimport { IWithResponsiveModeState } from '../../utilities/decorators/withResponsiveMode';\r\nimport {\r\n  BaseComponent,\r\n  KeyCodes,\r\n  css,\r\n  findIndex,\r\n  getId,\r\n  getNativeProps,\r\n  divProperties,\r\n  getFirstFocusable,\r\n  getLastFocusable,\r\n  createRef\r\n} from '../../Utilities';\r\nimport { SelectableOptionMenuItemType } from '../../utilities/selectableOption/SelectableOption.types';\r\nimport * as stylesImport from './Dropdown.scss';\r\nconst styles: any = stylesImport;\r\nimport { getStyles as getCheckboxStyles } from '../Checkbox/Checkbox.styles';\r\nimport { getTheme } from '../../Styling';\r\nimport { KeytipData } from '../../KeytipData';\r\n\r\n// Internal only props interface to support mixing in responsive mode\r\nexport interface IDropdownInternalProps extends IDropdownProps, IWithResponsiveModeState {\r\n\r\n}\r\n\r\nexport interface IDropdownState {\r\n  isOpen?: boolean;\r\n  selectedIndices?: number[];\r\n}\r\n\r\n@withResponsiveMode\r\nexport class Dropdown extends BaseComponent<IDropdownInternalProps, IDropdownState> {\r\n\r\n  public static defaultProps = {\r\n    options: [] as any[]\r\n  };\r\n\r\n  private static Option = 'option';\r\n\r\n  private _host = createRef<HTMLDivElement>();\r\n  private _focusZone = createRef<IFocusZone>();\r\n  private _dropDown = createRef<HTMLDivElement>();\r\n  private _id: string;\r\n  private _isScrollIdle: boolean;\r\n  private readonly _scrollIdleDelay: number = 250 /* ms */;\r\n  private _scrollIdleTimeoutId: number | undefined;\r\n\r\n  constructor(props: IDropdownProps) {\r\n    super(props);\r\n    props.options.forEach((option: any) => {\r\n      if (!option.itemType) {\r\n        option.itemType = DropdownMenuItemType.Normal;\r\n      }\r\n    });\r\n    super(props);\r\n\r\n    this._warnDeprecations({\r\n      'isDisabled': 'disabled'\r\n    });\r\n\r\n    this._warnMutuallyExclusive({\r\n      'defaultSelectedKey': 'selectedKey',\r\n      'defaultSelectedKeys': 'selectedKeys',\r\n      'selectedKeys': 'selectedKey',\r\n      'multiSelect': 'defaultSelectedKey',\r\n      'selectedKey': 'multiSelect'\r\n    });\r\n\r\n    this._id = props.id || getId('Dropdown');\r\n    this._isScrollIdle = true;\r\n\r\n    this.state = {\r\n      isOpen: false\r\n    };\r\n    if (this.props.multiSelect) {\r\n      const selectedKeys = props.defaultSelectedKeys !== undefined ? props.defaultSelectedKeys : props.selectedKeys;\r\n      this.state = {\r\n        selectedIndices: this._getSelectedIndexes(props.options, selectedKeys)\r\n      };\r\n    } else {\r\n      const selectedKey = props.defaultSelectedKey !== undefined ? props.defaultSelectedKey : props.selectedKey;\r\n      this.state = {\r\n        selectedIndices: this._getSelectedIndexes(props.options, selectedKey!)\r\n      };\r\n    }\r\n\r\n  }\r\n\r\n  public componentWillReceiveProps(newProps: IDropdownProps): void {\r\n    // In controlled component usage where selectedKey is provided, update the selectedIndex\r\n    // state if the key or options change.\r\n    const selectedKeyProp: keyof IDropdownProps = this.props.multiSelect ? 'selectedKeys' : 'selectedKey';\r\n    if (newProps[selectedKeyProp] !== undefined &&\r\n      (newProps[selectedKeyProp] !== this.props[selectedKeyProp] || newProps.options !== this.props.options)) {\r\n      this.setState({\r\n        selectedIndices: this._getSelectedIndexes(newProps.options, newProps[selectedKeyProp])\r\n      });\r\n    }\r\n  }\r\n\r\n  public componentDidUpdate(prevProps: IDropdownProps, prevState: IDropdownState) {\r\n    if (prevState.isOpen === true && this.state.isOpen === false) {\r\n      if (this._dropDown.current) {\r\n        this._dropDown.current.focus();\r\n      }\r\n\r\n      if (this.props.onDismiss) {\r\n        this.props.onDismiss();\r\n      }\r\n    }\r\n  }\r\n\r\n  // Primary Render\r\n  public render(): JSX.Element {\r\n    const id = this._id;\r\n    let {\r\n      disabled\r\n    } = this.props;\r\n    const {\r\n      className,\r\n      label,\r\n      options,\r\n      isDisabled,\r\n      ariaLabel,\r\n      required,\r\n      errorMessage,\r\n      keytipProps,\r\n      onRenderTitle = this._onRenderTitle,\r\n      onRenderContainer = this._onRenderContainer,\r\n      onRenderPlaceHolder = this._onRenderPlaceHolder,\r\n      onRenderCaretDown = this._onRenderCaretDown\r\n    } = this.props;\r\n    const { isOpen, selectedIndices = [] } = this.state;\r\n    const selectedOptions = this._getAllSelectedOptions(options, selectedIndices);\r\n    const divProps = getNativeProps(this.props, divProperties);\r\n\r\n    // Remove this deprecation workaround at 1.0.0\r\n    if (isDisabled !== undefined) {\r\n      disabled = isDisabled;\r\n    }\r\n    const describedBy = id + '-option';\r\n\r\n    return (\r\n      <div className={ css('ms-Dropdown-container') }>\r\n        { label && (\r\n          <Label className={ css('ms-Dropdown-label') } id={ id + '-label' } htmlFor={ id } required={ required }>{ label }</Label>\r\n        ) }\r\n        <KeytipData keytipProps={ keytipProps } disabled={ disabled }>\r\n          { (keytipAttributes: any): JSX.Element => (\r\n            <div\r\n              { ...keytipAttributes }\r\n              data-is-focusable={ !disabled }\r\n              ref={ this._dropDown }\r\n              id={ id }\r\n              tabIndex={ disabled ? -1 : 0 }\r\n              aria-expanded={ isOpen ? 'true' : 'false' }\r\n              role='listbox'\r\n              aria-live={ disabled || isOpen ? 'off' : 'assertive' }\r\n              aria-label={ ariaLabel }\r\n              aria-describedby={ describedBy + (keytipAttributes['aria-describedby'] || '') }\r\n              aria-activedescendant={ isOpen && selectedIndices.length === 1 && selectedIndices[0] >= 0 ? (this._id + '-list' + selectedIndices[0]) : undefined }\r\n              aria-disabled={ disabled }\r\n              aria-owns={ isOpen ? id + '-list' : undefined }\r\n              { ...divProps }\r\n              className={ css(\r\n                'ms-Dropdown',\r\n                styles.root,\r\n                className,\r\n                isOpen! && 'is-open',\r\n                disabled! && ('is-disabled ' + styles.rootIsDisabled),\r\n                required! && 'is-required',\r\n              ) }\r\n              onBlur={ this._onDropdownBlur }\r\n              onKeyDown={ this._onDropdownKeyDown }\r\n              onKeyUp={ this._onDropdownKeyUp }\r\n              onClick={ this._onDropdownClick }\r\n            >\r\n              <span\r\n                id={ id + '-option' }\r\n                className={ css(\r\n                  'ms-Dropdown-title', styles.title,\r\n                  !selectedOptions.length && 'ms-Dropdown-titleIsPlaceHolder',\r\n                  !selectedOptions.length && styles.titleIsPlaceHolder,\r\n                  (errorMessage && errorMessage.length > 0 ? styles.titleIsError : null))\r\n                }\r\n                aria-atomic={ true }\r\n                role='listbox'\r\n              >\r\n                { // If option is selected render title, otherwise render the placeholder text\r\n                  selectedOptions.length ? (\r\n                    onRenderTitle(selectedOptions, this._onRenderTitle)\r\n                  ) :\r\n                    onRenderPlaceHolder(this.props, this._onRenderPlaceHolder)\r\n                }\r\n              </span>\r\n              <span className={ css('ms-Dropdown-caretDownWrapper', styles.caretDownWrapper) }>\r\n                { onRenderCaretDown(this.props, this._onRenderCaretDown) }\r\n              </span>\r\n            </div>\r\n          ) }\r\n        </KeytipData>\r\n        {\r\n          isOpen && (\r\n            onRenderContainer(this.props, this._onRenderContainer)\r\n          )\r\n        }\r\n        {\r\n          errorMessage &&\r\n          <div\r\n            className={ css(styles.errorMessage) }\r\n          >\r\n            { errorMessage }\r\n          </div>\r\n        }\r\n      </div>\r\n    );\r\n  }\r\n\r\n  public focus(shouldOpenOnFocus?: boolean): void {\r\n    if (this._dropDown.current && this._dropDown.current.tabIndex !== -1) {\r\n      this._dropDown.current.focus();\r\n\r\n      if (shouldOpenOnFocus) {\r\n        this.setState({\r\n          isOpen: true\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  public setSelectedIndex(index: number): void {\r\n    const { onChanged, options, selectedKey, selectedKeys, multiSelect } = this.props;\r\n    const { selectedIndices = [] } = this.state;\r\n    const checked: boolean = selectedIndices ? selectedIndices.indexOf(index) > -1 : false;\r\n\r\n    index = Math.max(0, Math.min(options.length - 1, index));\r\n\r\n    if (!multiSelect && index === selectedIndices[0]) {\r\n      return;\r\n    } else if (!multiSelect && selectedKey === undefined) {\r\n      // Set the selected option if this is an uncontrolled component\r\n      this.setState({\r\n        selectedIndices: [index]\r\n      });\r\n    } else if (multiSelect && selectedKeys === undefined) {\r\n      const newIndexes = selectedIndices ? this._copyArray(selectedIndices) : [];\r\n      if (checked) {\r\n        const position = newIndexes.indexOf(index);\r\n        if (position > -1) {\r\n          // unchecked the current one\r\n          newIndexes.splice(position, 1);\r\n        }\r\n      } else {\r\n        // add the new selected index into the existing one\r\n        newIndexes.push(index);\r\n      }\r\n      this.setState({\r\n        selectedIndices: newIndexes\r\n      });\r\n    }\r\n\r\n    if (onChanged) {\r\n      // for single-select, option passed in will always be selected.\r\n      // for multi-select, flip the checked value\r\n      const changedOpt = multiSelect ? { ...options[index], selected: !checked } : options[index];\r\n      onChanged(changedOpt, index);\r\n    }\r\n  }\r\n\r\n  private _copyArray(array: any[]): any[] {\r\n    const newArray = [];\r\n    for (const element of array) {\r\n      newArray.push(element);\r\n    }\r\n    return newArray;\r\n  }\r\n\r\n  /**\r\n   * Finds the next valid Dropdown option and sets the selected index to it.\r\n   * @param stepValue Value of how many items the function should traverse.  Should be -1 or 1.\r\n   * @param index Index of where the search should start\r\n   * @param selectedIndex The selectedIndex Dropdown's state\r\n   * @returns The next valid dropdown option's index\r\n   */\r\n  private _moveIndex(stepValue: number, index: number, selectedIndex: number): number {\r\n    const { options } = this.props;\r\n    // Return selectedIndex if nothing has changed or options is empty\r\n    if (selectedIndex === index || options.length === 0) {\r\n      return selectedIndex;\r\n    }\r\n\r\n    // Set starting index to 0 if index is < 0\r\n    if (index < 0) {\r\n      index = 0;\r\n    }\r\n    // Set starting index to last option index if greater than options.length\r\n    if (index >= options.length) {\r\n      index = options.length - 1;\r\n    }\r\n    let stepCounter = 0;\r\n    // If current index is a header or divider, or disabled, increment by step\r\n    while (options[index].itemType === DropdownMenuItemType.Header ||\r\n      options[index].itemType === DropdownMenuItemType.Divider ||\r\n      options[index].disabled) {\r\n      // If stepCounter exceeds length of options, then return selectedIndex (-1)\r\n      if (stepCounter >= options.length) {\r\n        return selectedIndex;\r\n      }\r\n      // If index + stepValue is out of bounds, wrap around\r\n      if (index + stepValue < 0) {\r\n        index = options.length;\r\n      } else if (index + stepValue >= options.length) {\r\n        index = -1;\r\n      }\r\n\r\n      index = index + stepValue;\r\n      stepCounter++;\r\n    }\r\n\r\n    this.setSelectedIndex(index);\r\n    return index;\r\n  }\r\n\r\n  // Render text in dropdown input\r\n  private _onRenderTitle = (item: IDropdownOption[]): JSX.Element => {\r\n    const { multiSelectDelimiter = ', ' } = this.props;\r\n\r\n    const displayTxt = item.map(i => i.text).join(multiSelectDelimiter);\r\n    return <span>{ displayTxt }</span>;\r\n  }\r\n\r\n  // Render placeHolder text in dropdown input\r\n  private _onRenderPlaceHolder = (props: IDropdownProps): JSX.Element | null => {\r\n    if (!props.placeHolder) {\r\n      return null;\r\n    }\r\n    return <span>{ props.placeHolder }</span>;\r\n  }\r\n\r\n  // Render Callout or Panel container and pass in list\r\n  private _onRenderContainer = (props: IDropdownProps): JSX.Element => {\r\n    const {\r\n      onRenderList = this._onRenderList,\r\n      responsiveMode,\r\n      calloutProps,\r\n      panelProps,\r\n      dropdownWidth\r\n    } = this.props;\r\n\r\n    const isSmall = responsiveMode! <= ResponsiveMode.medium;\r\n\r\n    return (\r\n      isSmall ?\r\n        (\r\n          <Panel\r\n            className={ css('ms-Dropdown-panel', styles.panel, !!panelProps && panelProps.className) }\r\n            isOpen={ true }\r\n            isLightDismiss={ true }\r\n            onDismissed={ this._onDismiss }\r\n            hasCloseButton={ false }\r\n            { ...panelProps }\r\n          >\r\n            { onRenderList(props, this._onRenderList) }\r\n          </Panel>\r\n        )\r\n        :\r\n        (\r\n          <Callout\r\n            isBeakVisible={ false }\r\n            gapSpace={ 0 }\r\n            doNotLayer={ false }\r\n            directionalHintFixed={ true }\r\n            directionalHint={ DirectionalHint.bottomLeftEdge }\r\n            { ...calloutProps }\r\n            className={ css('ms-Dropdown-callout', styles.callout, !!calloutProps && calloutProps.className) }\r\n            target={ this._dropDown.current }\r\n            onDismiss={ this._onDismiss }\r\n            onScroll={ this._onScroll }\r\n            onPositioned={ this._onPositioned }\r\n            calloutWidth={ dropdownWidth || (this._dropDown.current ? this._dropDown.current.clientWidth : 0) }\r\n          >\r\n            { onRenderList(props, this._onRenderList) }\r\n          </Callout>\r\n        )\r\n    );\r\n  }\r\n\r\n  // Render Caret Down Icon\r\n  private _onRenderCaretDown = (props: IDropdownProps): JSX.Element => {\r\n    return (\r\n      <Icon className={ css('ms-Dropdown-caretDown', styles.caretDown) } iconName='ChevronDown' />\r\n    );\r\n  }\r\n\r\n  // Render List of items\r\n  private _onRenderList = (props: IDropdownProps): JSX.Element => {\r\n    const {\r\n      onRenderItem = this._onRenderItem\r\n    } = this.props;\r\n\r\n    const id = this._id;\r\n    const { selectedIndices = [] } = this.state;\r\n\r\n    return (\r\n      <div\r\n        className={ styles.listWrapper }\r\n        onKeyDown={ this._onZoneKeyDown }\r\n        ref={ this._host }\r\n        tabIndex={ 0 }\r\n      >\r\n        <FocusZone\r\n          ref={ this._focusZone }\r\n          direction={ FocusZoneDirection.vertical }\r\n          defaultActiveElement={ selectedIndices[0] !== undefined ? `#${id}-list${selectedIndices[0]}` : undefined }\r\n          id={ id + '-list' }\r\n          className={ css('ms-Dropdown-items', styles.items) }\r\n          aria-labelledby={ id + '-label' }\r\n          role='listbox'\r\n        >\r\n          { this.props.options.map((item: any, index: number) => onRenderItem({ ...item, index }, this._onRenderItem)) }\r\n        </FocusZone>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Render items\r\n  private _onRenderItem = (item: IDropdownOption): JSX.Element | null => {\r\n    switch (item.itemType) {\r\n      case SelectableOptionMenuItemType.Divider:\r\n        return this._renderSeparator(item);\r\n      case SelectableOptionMenuItemType.Header:\r\n        return this._renderHeader(item);\r\n      default:\r\n        return this._renderOption(item);\r\n    }\r\n  }\r\n\r\n  // Render separator\r\n  private _renderSeparator(item: IDropdownOption): JSX.Element | null {\r\n    const { index, key } = item;\r\n    if (index! > 0) {\r\n      return (\r\n        <div\r\n          role='separator'\r\n          key={ key }\r\n          className={ css('ms-Dropdown-divider', styles.divider) }\r\n        />\r\n      );\r\n    }\r\n    return null;\r\n  }\r\n\r\n  private _renderHeader(item: IDropdownOption): JSX.Element {\r\n    const { onRenderOption = this._onRenderOption } = this.props;\r\n    const { key } = item;\r\n    return (\r\n      <div\r\n        key={ key }\r\n        className={ css('ms-Dropdown-header', styles.header) }\r\n      >\r\n        { onRenderOption(item, this._onRenderOption) }\r\n      </div>);\r\n  }\r\n\r\n  // Render menu item\r\n  private _renderOption = (item: IDropdownOption): JSX.Element => {\r\n    const { onRenderOption = this._onRenderOption } = this.props;\r\n    const { selectedIndices = [] } = this.state;\r\n    const id = this._id;\r\n    const isItemSelected = item.index !== undefined && selectedIndices ? selectedIndices.indexOf(item.index) > -1 : false;\r\n    const checkboxStyles = getCheckboxStyles(getTheme());\r\n\r\n    return (\r\n      !this.props.multiSelect ?\r\n        (\r\n          <CommandButton\r\n            id={ id + '-list' + item.index }\r\n            ref={ Dropdown.Option + item.index }\r\n            key={ item.key }\r\n            data-index={ item.index }\r\n            data-is-focusable={ !item.disabled }\r\n            disabled={ item.disabled }\r\n            className={ css(\r\n              'ms-Dropdown-item', styles.item, {\r\n                ['is-selected ' + styles.itemIsSelected]: isItemSelected,\r\n                ['is-disabled ' + styles.itemIsDisabled]: item.disabled === true\r\n              }\r\n            ) }\r\n            onClick={ this._onItemClick(item) }\r\n            onMouseEnter={ this._onItemMouseEnter.bind(this, item) }\r\n            onMouseLeave={ this._onMouseItemLeave.bind(this, item) }\r\n            onMouseMove={ this._onItemMouseMove.bind(this, item) }\r\n            role='option'\r\n            aria-selected={ isItemSelected ? 'true' : 'false' }\r\n            ariaLabel={ item.ariaLabel || item.text }\r\n          >\r\n            { onRenderOption(item, this._onRenderOption) }\r\n          </CommandButton>\r\n        ) : (\r\n          <Checkbox\r\n            id={ id + '-list' + item.index }\r\n            ref={ Dropdown.Option + item.index }\r\n            key={ item.key }\r\n            data-index={ item.index }\r\n            data-is-focusable={ !item.disabled }\r\n            disabled={ item.disabled }\r\n            onChange={ this._onItemClick(item) }\r\n            inputProps={ {\r\n              onMouseEnter: this._onItemMouseEnter.bind(this, item),\r\n              onMouseLeave: this._onMouseItemLeave.bind(this, item),\r\n              onMouseMove: this._onItemMouseMove.bind(this, item)\r\n            } }\r\n            label={ item.text }\r\n            onRenderLabel={ this._onRenderLabel.bind(this, item) }\r\n            className={ css(\r\n              'ms-ColumnManagementPanel-checkbox',\r\n              styles.dropdownCheckbox,\r\n              'ms-Dropdown-item', styles.item, {\r\n                ['is-selected ' + styles.itemIsSelected]: isItemSelected,\r\n                ['is-disabled ' + styles.itemIsDisabled]: item.disabled\r\n              }\r\n            ) }\r\n            role='option'\r\n            aria-selected={ isItemSelected ? 'true' : 'false' }\r\n            checked={ isItemSelected }\r\n            // Hover is being handled by focus styles\r\n            // so clear out the explicit hover styles\r\n            styles={ {\r\n              checkboxHovered: checkboxStyles.checkbox,\r\n              checkboxCheckedHovered: checkboxStyles.checkboxChecked,\r\n              textHovered: checkboxStyles.text\r\n            } }\r\n          />\r\n        )\r\n    );\r\n  }\r\n\r\n  // Render content of item (i.e. text/icon inside of button)\r\n  private _onRenderOption = (item: IDropdownOption): JSX.Element => {\r\n    return <span className={ css('ms-Dropdown-optionText', styles.optionText) }>{ item.text }</span>;\r\n  }\r\n\r\n  // Render custom label for drop down item\r\n  private _onRenderLabel = (item: IDropdownOption): JSX.Element | null => {\r\n    const { onRenderOption = this._onRenderOption } = this.props;\r\n    return onRenderOption(item, this._onRenderOption);\r\n  }\r\n\r\n  private _onPositioned = (): void => {\r\n    if (this._focusZone.current) {\r\n      // Focusing an element can trigger a reflow. Making this wait until there is an animation\r\n      // frame can improve perf significantly.\r\n      this._async.requestAnimationFrame(() => this._focusZone.current!.focus());\r\n    }\r\n  }\r\n\r\n  private _onItemClick = (item: IDropdownOption): () => void => {\r\n    return (): void => {\r\n      if (!item.disabled) {\r\n        this.setSelectedIndex(item.index!);\r\n        if (!this.props.multiSelect) {\r\n          // only close the callout when it's in single-select mode\r\n          this.setState({\r\n            isOpen: false\r\n          });\r\n        }\r\n      }\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Scroll handler for the callout to make sure the mouse events\r\n   * for updating focus are not interacting during scroll\r\n   */\r\n  private _onScroll = (): void => {\r\n    if (!this._isScrollIdle && this._scrollIdleTimeoutId !== undefined) {\r\n      this._async.clearTimeout(this._scrollIdleTimeoutId);\r\n      this._scrollIdleTimeoutId = undefined;\r\n    } else {\r\n      this._isScrollIdle = false;\r\n    }\r\n\r\n    this._scrollIdleTimeoutId = this._async.setTimeout(() => { this._isScrollIdle = true; }, this._scrollIdleDelay);\r\n  }\r\n\r\n  private _onItemMouseEnter(item: any, ev: React.MouseEvent<HTMLElement>): void {\r\n    if (!this._isScrollIdle) {\r\n      return;\r\n    }\r\n\r\n    const targetElement = ev.currentTarget as HTMLElement;\r\n    targetElement.focus();\r\n  }\r\n\r\n  private _onItemMouseMove(item: any, ev: React.MouseEvent<HTMLElement>): void {\r\n    const targetElement = ev.currentTarget as HTMLElement;\r\n\r\n    if (!this._isScrollIdle || document.activeElement === targetElement) {\r\n      return;\r\n    }\r\n\r\n    targetElement.focus();\r\n  }\r\n\r\n  private _onMouseItemLeave = (item: any, ev: React.MouseEvent<HTMLElement>): void => {\r\n    if (!this._isScrollIdle) {\r\n      return;\r\n    }\r\n\r\n    /**\r\n     * IE11 focus() method forces parents to scroll to top of element.\r\n     * Edge and IE expose a setActive() function for focusable divs that\r\n     * sets the page focus but does not scroll the parent element.\r\n     */\r\n    if (this._host.current) {\r\n      if ((this._host.current as any).setActive) {\r\n        (this._host.current as any).setActive();\r\n      } else {\r\n        this._host.current.focus();\r\n      }\r\n    }\r\n  }\r\n\r\n  private _onDismiss = (): void => {\r\n    this.setState({ isOpen: false });\r\n\r\n    if (this._dropDown.current) {\r\n      this._dropDown.current.focus();\r\n    }\r\n  }\r\n\r\n  // Get all selected indexes for multi-select mode\r\n  private _getSelectedIndexes(\r\n    options: IDropdownOption[],\r\n    selectedKey: string | number | string[] | number[] | undefined\r\n  ): number[] {\r\n    if (selectedKey === undefined) {\r\n      if (this.props.multiSelect) {\r\n        return this._getAllSelectedIndices(options);\r\n      }\r\n      const selectedIndex = this._getSelectedIndex(options, null);\r\n      return selectedIndex !== -1 ? [selectedIndex] : [];\r\n    } else if (!Array.isArray(selectedKey)) {\r\n      return [this._getSelectedIndex(options, selectedKey)];\r\n    }\r\n\r\n    const selectedIndices: number[] = [];\r\n    for (const key of selectedKey) {\r\n      selectedIndices.push(this._getSelectedIndex(options, key));\r\n    }\r\n    return selectedIndices;\r\n  }\r\n\r\n  // Get all selected options for multi-select mode\r\n  private _getAllSelectedOptions(options: IDropdownOption[], selectedIndices: number[]): IDropdownOption[] {\r\n    const selectedOptions: IDropdownOption[] = [];\r\n    for (const index of selectedIndices) {\r\n      const option = options[index];\r\n\r\n      if (option) {\r\n        selectedOptions.push(option);\r\n      }\r\n    }\r\n\r\n    return selectedOptions;\r\n  }\r\n\r\n  private _getAllSelectedIndices(options: IDropdownOption[]): number[] {\r\n    return options\r\n      .map((option: IDropdownOption, index: number) => option.selected ? index : -1)\r\n      .filter(index => index !== -1);\r\n\r\n  }\r\n\r\n  private _getSelectedIndex(options: IDropdownOption[], selectedKey: string | number | null): number {\r\n    return findIndex(options, (option => {\r\n      // tslint:disable-next-line:triple-equals\r\n      if (selectedKey != null) {\r\n        return option.key === selectedKey;\r\n      } else {\r\n        return !!option.isSelected || !!option.selected;\r\n      }\r\n    }));\r\n  }\r\n\r\n  private _onDropdownBlur = (ev: React.FocusEvent<HTMLDivElement>): void => {\r\n    if (this.state.isOpen) {\r\n      // Do not onBlur when the callout is opened\r\n      return;\r\n    }\r\n    if (this.props.onBlur) {\r\n      this.props.onBlur(ev);\r\n    }\r\n  }\r\n\r\n  private _onDropdownKeyDown = (ev: React.KeyboardEvent<HTMLDivElement>): void => {\r\n    if (this.props.onKeyDown) {\r\n      this.props.onKeyDown(ev);\r\n      if (ev.defaultPrevented) {\r\n        return;\r\n      }\r\n    }\r\n    let newIndex: number | undefined;\r\n    const selectedIndex = this.state.selectedIndices!.length ? this.state.selectedIndices![0] : -1;\r\n\r\n    switch (ev.which) {\r\n      case KeyCodes.enter:\r\n        this.setState({\r\n          isOpen: !this.state.isOpen\r\n        });\r\n        break;\r\n\r\n      case KeyCodes.escape:\r\n        if (!this.state.isOpen) {\r\n          return;\r\n        }\r\n\r\n        this.setState({\r\n          isOpen: false\r\n        });\r\n        break;\r\n\r\n      case KeyCodes.up:\r\n        if (this.props.multiSelect) {\r\n          this.setState({ isOpen: true });\r\n        } else {\r\n          newIndex = this._moveIndex(-1, selectedIndex - 1, selectedIndex);\r\n        }\r\n        break;\r\n\r\n      case KeyCodes.down:\r\n        if (ev.altKey || ev.metaKey || this.props.multiSelect) {\r\n          this.setState({ isOpen: true });\r\n        } else {\r\n          newIndex = this._moveIndex(1, selectedIndex + 1, selectedIndex);\r\n        }\r\n        break;\r\n\r\n      case KeyCodes.home:\r\n        if (!this.props.multiSelect) {\r\n          newIndex = this._moveIndex(1, 0, selectedIndex);\r\n        }\r\n        break;\r\n\r\n      case KeyCodes.end:\r\n        if (!this.props.multiSelect) {\r\n          newIndex = this._moveIndex(-1, this.props.options.length - 1, selectedIndex);\r\n        }\r\n        break;\r\n\r\n      case KeyCodes.space:\r\n        // event handled in _onDropdownKeyUp\r\n        break;\r\n\r\n      default:\r\n        if (ev.altKey || ev.metaKey) {\r\n          this.setState({\r\n            isOpen: false\r\n          });\r\n          ev.stopPropagation();\r\n          ev.preventDefault();\r\n        }\r\n        return;\r\n    }\r\n\r\n    if (newIndex !== selectedIndex) {\r\n      ev.stopPropagation();\r\n      ev.preventDefault();\r\n    }\r\n  }\r\n\r\n  private _onDropdownKeyUp = (ev: React.KeyboardEvent<HTMLDivElement>): void => {\r\n    if (this.props.onKeyUp) {\r\n      this.props.onKeyUp(ev);\r\n      if (ev.preventDefault) {\r\n        return;\r\n      }\r\n    }\r\n    switch (ev.which) {\r\n      case KeyCodes.space:\r\n        this.setState({\r\n          isOpen: !this.state.isOpen\r\n        });\r\n        break;\r\n\r\n      default:\r\n        return;\r\n    }\r\n\r\n    ev.stopPropagation();\r\n    ev.preventDefault();\r\n  }\r\n\r\n  private _onZoneKeyDown = (ev: React.KeyboardEvent<HTMLElement>): void => {\r\n    let elementToFocus;\r\n\r\n    switch (ev.which) {\r\n\r\n      case KeyCodes.up:\r\n        if (ev.altKey || ev.metaKey) {\r\n          this.setState({ isOpen: false });\r\n        } else {\r\n          if (this._host.current) {\r\n            elementToFocus = getLastFocusable(this._host.current, (this._host.current.lastChild as HTMLElement), true);\r\n          }\r\n        }\r\n        break;\r\n\r\n      // All directional keystrokes should be canceled when the zone is rendered.\r\n      // This avoids the body scroll from reacting and thus dismissing the dropdown.\r\n      case KeyCodes.home:\r\n      case KeyCodes.end:\r\n      case KeyCodes.pageUp:\r\n      case KeyCodes.pageDown:\r\n        break;\r\n\r\n      case KeyCodes.down:\r\n        if (this._host.current) {\r\n          elementToFocus = getFirstFocusable(this._host.current, (this._host.current.firstChild as HTMLElement), true);\r\n        }\r\n        break;\r\n\r\n      case KeyCodes.escape:\r\n        this.setState({ isOpen: false });\r\n        break;\r\n\r\n      case KeyCodes.tab:\r\n        this.setState({ isOpen: false });\r\n        return;\r\n\r\n      default:\r\n        if (ev.altKey || ev.metaKey) {\r\n          this.setState({\r\n            isOpen: false\r\n          });\r\n          break;\r\n        }\r\n        return;\r\n    }\r\n\r\n    if (elementToFocus) {\r\n      elementToFocus.focus();\r\n    }\r\n\r\n    ev.stopPropagation();\r\n    ev.preventDefault();\r\n  }\r\n\r\n  private _onDropdownClick = (ev: React.MouseEvent<HTMLDivElement>): void => {\r\n    if (this.props.onClick) {\r\n      this.props.onClick(ev);\r\n      if (ev.preventDefault) {\r\n        return;\r\n      }\r\n    }\r\n    let { disabled } = this.props;\r\n    const { isDisabled } = this.props;\r\n    const { isOpen } = this.state;\r\n\r\n    // Remove this deprecation workaround at 1.0.0\r\n    if (isDisabled !== undefined) {\r\n      disabled = isDisabled;\r\n    }\r\n\r\n    if (!disabled) {\r\n      this.setState({\r\n        isOpen: !isOpen\r\n      });\r\n    }\r\n  }\r\n}\r\n"]}