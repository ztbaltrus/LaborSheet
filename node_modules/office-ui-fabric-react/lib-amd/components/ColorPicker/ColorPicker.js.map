{"version":3,"file":"ColorPicker.js","sourceRoot":"../src/","sources":["components/ColorPicker/ColorPicker.tsx"],"names":[],"mappings":"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","sourcesContent":["import * as React from 'react';\r\nimport {\r\n  BaseComponent,\r\n  css\r\n} from '../../Utilities';\r\nimport { IColorPickerProps } from './ColorPicker.types';\r\nimport { TextField } from '../../TextField';\r\nimport { ColorRectangle } from './ColorRectangle';\r\nimport { ColorSlider } from './ColorSlider';\r\nimport {\r\n  MAX_COLOR_HUE,\r\n  IColor,\r\n  getColorFromString,\r\n  getColorFromRGBA,\r\n  updateA,\r\n  updateH,\r\n  updateSV\r\n} from '../../utilities/color/colors';\r\nimport { FontClassNames } from '../../Styling';\r\nimport * as stylesImport from './ColorPicker.scss';\r\nconst styles: any = stylesImport;\r\n\r\nexport interface IColorPickerState {\r\n  isOpen: boolean;\r\n  color: IColor;\r\n}\r\n\r\nexport class ColorPicker extends BaseComponent<IColorPickerProps, IColorPickerState> {\r\n  public static defaultProps = {\r\n    hexLabel: 'Hex',\r\n    redLabel: 'Red',\r\n    greenLabel: 'Green',\r\n    blueLabel: 'Blue',\r\n    alphaLabel: 'Alpha'\r\n  };\r\n\r\n  private hexText: TextField;\r\n  private rText: TextField;\r\n  private gText: TextField;\r\n  private bText: TextField;\r\n  private aText: TextField;\r\n\r\n  constructor(props: IColorPickerProps) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      color: getColorFromString(props.color)\r\n    } as IColorPickerState;\r\n  }\r\n\r\n  public componentWillReceiveProps(newProps: IColorPickerProps): void {\r\n    if (newProps.color) {\r\n      this._updateColor(getColorFromString(newProps.color));\r\n    }\r\n  }\r\n\r\n  public render(): JSX.Element {\r\n    const { color } = this.state;\r\n\r\n    return (\r\n      <div className={ css('ms-ColorPicker', styles.root) }>\r\n        <div className={ css('ms-ColorPicker-panel', styles.panel) }>\r\n          <ColorRectangle color={ color } onSVChanged={ this._onSVChanged } />\r\n          <ColorSlider\r\n            className={ css('is-hue', styles.colorSliderIsHue) }\r\n            minValue={ 0 }\r\n            maxValue={ MAX_COLOR_HUE }\r\n            value={ color.h }\r\n            onChanged={ this._onHChanged }\r\n          />\r\n          { !this.props.alphaSliderHidden && (\r\n            <ColorSlider\r\n              className={ css('is-alpha', styles.colorSliderIsAlpha) }\r\n              overlayStyle={ { background: `linear-gradient(to right, transparent 0, ${color.str} 100%)` } }\r\n              minValue={ 0 }\r\n              maxValue={ 100 }\r\n              value={ color.a }\r\n              onChanged={ this._onAChanged }\r\n            />) }\r\n          <table className={ css('ms-ColorPicker-table', styles.table) } cellPadding='0' cellSpacing='0'>\r\n            <thead>\r\n              <tr className={ FontClassNames.small }>\r\n                <td className={ styles.tableHexCell }>{ this.props.hexLabel }</td>\r\n                <td>{ this.props.redLabel }</td>\r\n                <td>{ this.props.greenLabel }</td>\r\n                <td>{ this.props.blueLabel }</td>\r\n                { !this.props.alphaSliderHidden && (\r\n                  <td>{ this.props.alphaLabel }</td>) }\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              <tr>\r\n                <td>\r\n                  <TextField\r\n                    className={ css('ms-ColorPicker-input', styles.input) }\r\n                    value={ color.hex }\r\n                    ref={ (ref) => this.hexText = ref! }\r\n                    onBlur={ this._onHexChanged }\r\n                    spellCheck={ false }\r\n                  />\r\n                </td>\r\n                <td style={ { width: '18%' } }>\r\n                  <TextField\r\n                    className={ css('ms-ColorPicker-input', styles.input) }\r\n                    onBlur={ this._onRGBAChanged }\r\n                    value={ String(color.r) }\r\n                    ref={ (ref) => this.rText = ref! }\r\n                    spellCheck={ false }\r\n                  />\r\n                </td>\r\n                <td style={ { width: '18%' } }>\r\n                  <TextField\r\n                    className={ css('ms-ColorPicker-input', styles.input) }\r\n                    onBlur={ this._onRGBAChanged }\r\n                    value={ String(color.g) }\r\n                    ref={ (ref) => this.gText = ref! }\r\n                    spellCheck={ false }\r\n                  />\r\n                </td>\r\n                <td style={ { width: '18%' } }>\r\n                  <TextField\r\n                    className={ css('ms-ColorPicker-input', styles.input) }\r\n                    onBlur={ this._onRGBAChanged }\r\n                    value={ String(color.b) }\r\n                    ref={ (ref) => this.bText = ref! }\r\n                    spellCheck={ false }\r\n                  />\r\n                </td>\r\n                { !this.props.alphaSliderHidden && (\r\n                  <td style={ { width: '18%' } }>\r\n                    <TextField\r\n                      className={ css('ms-ColorPicker-input', styles.input) }\r\n                      onBlur={ this._onRGBAChanged }\r\n                      value={ String(color.a) }\r\n                      ref={ (ref) => this.aText = ref! }\r\n                      spellCheck={ false }\r\n                    />\r\n                  </td>\r\n                ) }\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  private _onSVChanged = (s: number, v: number): void => {\r\n    this._updateColor(updateSV(this.state.color, s, v));\r\n  }\r\n\r\n  private _onHChanged = (h: number): void => {\r\n    this._updateColor(updateH(this.state.color, h));\r\n  }\r\n\r\n  private _onAChanged = (a: number): void => {\r\n    this._updateColor(updateA(this.state.color, a));\r\n  }\r\n\r\n  private _onHexChanged = (): void => {\r\n    this._updateColor(getColorFromString('#' + this.hexText.value));\r\n  }\r\n\r\n  private _onRGBAChanged = (): void => {\r\n    this._updateColor(getColorFromRGBA({\r\n      r: Number(this.rText.value),\r\n      g: Number(this.gText.value),\r\n      b: Number(this.bText.value),\r\n      a: Number((this.aText && this.aText.value) || 100)\r\n    }));\r\n  }\r\n\r\n  private _updateColor(newColor?: IColor): void {\r\n    if (!newColor) {\r\n      return;\r\n    }\r\n\r\n    const { onColorChanged } = this.props;\r\n\r\n    if (newColor.str !== this.state.color.str) {\r\n      this.setState({\r\n        color: newColor\r\n      } as IColorPickerState, () => {\r\n        if (onColorChanged) {\r\n          onColorChanged(newColor.str);\r\n        }\r\n      });\r\n    }\r\n  }\r\n}\r\n"]}